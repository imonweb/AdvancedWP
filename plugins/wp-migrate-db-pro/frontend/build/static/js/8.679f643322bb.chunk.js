(this.webpackJSONPwpmdb=this.webpackJSONPwpmdb||[]).push([[8],{829:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(0),c=n.n(i),l=n(1),r=n(7),s=n(62),o=n(12),u=n(134),p=n.n(u),m=n(11),d=n.n(m),f=n(44),g=n(20),b=n.n(g),h=Object(r.c)(function(e){return{theme_plugin_files:e.theme_plugin_files,panel_info:e.panels,local_version:e.migrations.local_site.theme_plugin_files_version}},{})(function(e){var t="",n=e.theme_plugin_files,a=e.panelsOpen,i=e.selected,r=e.items,s=e.type;if(!b()(a,s)&&(n[s]||{}).enabled){if(t=e.summary,["other_files","muplugin_files"].includes(s)){if(0===i.length)return c.a.createElement("span",{className:"empty-warning"},Object(l.a)("Empty selection","wp-migrate-db"));var o=[];r.forEach(function(e){i.includes(e.path)&&o.push(e.name)}),t=o.join(", ")}"core_files"===s&&(t=Object(l.a)("Export all Core files","wp-migrate-db"))}return c.a.createElement(c.a.Fragment,null,d()(t))}),_=n(679),O=n(103),v=n(316),j=n(140),E=function(e){var t=e.ariaLabel,n=e.optionChoices,a=e.type,i=e.value,l=Object(r.d)(),s=n,o=function(t){l(e.updateOption(t.target.value,a))},u=Object.keys(s).map(function(e){var t=a+"-"+e,n=i===e;return c.a.createElement("div",{key:e},c.a.createElement("input",{id:t,type:"radio",value:e,checked:n,onChange:o,name:a}),c.a.createElement("label",{htmlFor:t},d()(s[e])))});return c.a.createElement("div",{className:"radiogroup",role:"radiogroup","aria-label":t},u)},w=n(104),y=n(16),x=n(307),P=function(e){var t=e.link,n=e.content,a=e.utmContent,i=e.utmCampaign,l=e.anchorLink,r=e.hasArrow,s=void 0===r||r;return c.a.createElement(x.a,{link:t,content:n,utmContent:a,utmCampaign:i,classes:"docs-link",hasArrow:s,anchorLink:l})},k=function(e,t,n){var a=[];if("object"===typeof t){var i=Object.values(t).map(function(e){return e[0].path});"selected"===n["".concat(e,"_option")]&&n["".concat(e,"_selected")].forEach(function(e){i.includes(e)&&a.push(e)}),"except"===n["".concat(e,"_option")]&&n["".concat(e,"_excluded")].forEach(function(e){i.includes(e)&&a.push(e)}),"active"===n["".concat(e,"_option")]&&Object.values(t).forEach(function(e){e[0].active&&a.push(e[0].path)}),"all"===n["".concat(e,"_option")]&&(a=i)}return a};var C=function(e,t){var n=e.theme_plugin_files,a=e.panelsOpen,u=e.current_migration,m=e.remote_site,g=e.local_site,b=u.status,x=u.intent,C=Object(v.b)(e),S=Object(r.d)(),N=t.title,F=t.type,L=t.panel_name,T=t.items,I=function(){return"savefile"===x?T:T.filter(function(e){return!1===e.path.includes("wp-migrate-db")})},W=T.map(function(e){return e.path}),A=!1,M={push:"Push",pull:"Pull",savefile:"Export"},U={all:Object(l.c)(Object(l.a)("%s all %s","wp-migrate-db"),M[x],F),active:Object(l.c)(Object(l.a)("%s only active %s","wp-migrate-db"),M[x],F),selected:Object(l.c)(Object(l.a)("%s only selected %s","wp-migrate-db"),M[x],F),except:Object(l.c)(Object(l.a)("%s all %s <b>except</b> those selected","wp-migrate-db"),M[x],F)},D=function(e,t,n,a,i){var c=i.site_details,l=k(a,c[a],e),r={themes:"theme_files",plugins:"plugin_files",muplugins:"muplugin_files",others:"other_files",core:"core_files"},s=(e[r[a]]||{}).enabled;return{enabled:void 0!==s&&s,isOpen:t.includes(r[a]),selected:l,selectionEmpty:p()(n,{name:"SELECTED_".concat(a.toUpperCase(),"_EMPTY")})}}(n,a,b,F,"pull"===x?m:g),J=D.enabled,V=D.isOpen,Y=D.selected,q=D.selectionEmpty;Object(i.useEffect)(function(){"select"===n["".concat(F,"_option")]&&S(e.updateSelected(Y,F)),"except"===n["".concat(F,"_option")]&&e.updateExcluded(Y,F)},[]),J&&!V&&(A=!0);var z=[],B="selected"===n["".concat(F,"_option")]||"except"===n["".concat(F,"_option")];A&&z.push("has-divider"),J&&z.push("enabled");var G={muplugins:Object(l.a)("Select any must-use plugins to be included in the migration.","wp-migrate-db"),others:Object(l.a)("Select any other files and folders found in the <code>wp-content</code> directory to be included in the migration.","wp-migrate-db"),core:Object(l.a)("Including WordPress core files ensures that the exported archive contains the exact version of WordPress installed on this site, which is helpful when replicating the site in a new environment. ","wp-migrate-db")};return c.a.createElement(f.a,{title:N,className:z.join(" "),panelName:L,disabled:C,enabled:J,forceDivider:A,callback:function(t){return Object(j.c)(t,L,V,J,C,e.addOpenPanel,e.removeOpenPanel,function(){return S(Object(s.g)(L))})},toggle:Object(s.g)(L),hasInput:!0,bodyClass:"tpf-panel-body",panelSummary:c.a.createElement(h,Object(o.a)({},e,{disabled:C,items:I(),selected:Y,title:N,type:L,summary:U[n["".concat(F,"_option")]]}))},c.a.createElement("div",null,["others","muplugins","core"].includes(F)&&c.a.createElement("p",{className:"panel-instructions"},d()(G[F]),"core"===F&&c.a.createElement(P,{link:"https://deliciousbrains.com/wp-migrate-db-pro/doc/full-site-exports/",content:Object(l.a)("Learn When to Include Core Files","wp-migrate-db"),utmContent:"wordpress-core-files-panel",utmCampaign:"wp-migrate-documentation",hasArrow:!0,anchorLink:"wordpress-core-files"})),!["others","muplugins","core"].includes(F)&&c.a.createElement(E,{ariaLabel:Object(l.c)(Object(l.a)("%s options","wp-migrate-db"),F),optionChoices:U,intent:"push",type:F,value:n["".concat(F,"_option")],updateOption:s.m}),"core"!==F&&c.a.createElement(w.a,{id:"".concat(F,"-multiselect"),options:I(),extraLabels:"",stateManager:function(t){"except"===n["".concat(F,"_option")]&&e.updateExcluded(t,F),e.updateSelected(t,F)},selected:Y,visible:!0,disabled:!B,updateSelected:function(t){var a=t.map(function(e){return e.path});"except"===n["".concat(F,"_option")]?e.updateExcluded(a,F):e.updateSelected(a,F)},selectInverse:function(){return"except"===n["".concat(F,"_option")]?Object(O.a)(e.updateExcluded,W,Y,F):Object(O.a)(e.updateSelected,W,Y,F)},showOptions:B,type:F,themePluginOption:n["".concat(F,"_option")]})),"core"!==F&&c.a.createElement("div",{className:"excludes-wrap"},c.a.createElement(_.a,Object(o.a)({},e,{excludes:n["".concat(F,"_excludes")],excludesUpdater:e.updateExcludes,type:F}))),q&&"selected"===n["".concat(F,"_option")]&&c.a.createElement(y.a,{type:"danger"},Object(l.c)(Object(l.a)("Please select at least one %s for migration","wp-migrate-db"),{themes:"theme",plugins:"plugin",muplugins:"must-use plugin",others:"file or directory",core:"file or directory"}[F])),q&&"except"===n["".concat(F,"_option")]&&c.a.createElement(y.a,{type:"danger"},Object(l.c)(Object(l.a)("Please select at least one %s to exclude from migration","wp-migrate-db"),"themes"===F?"theme":"plugin")))},S=n(4),N=(n(633),n(35)),F=n(22);function L(e,t){var n={};return["themes","plugins","muplugins","others","core"].forEach(function(i,c){var l="pull"===t?e.remote_site.site_details[i]:e.local_site.site_details[i],r="pull"===t||"savefile"===t?e.local_site.site_details[i]:e.remote_site.site_details[i],s=l,o=[],u=function(e){if(r){var t=r[e];if(t&&t[0].hasOwnProperty("version"))return t[0].version}return null};for(var p in s){var m=s[p];if(m){var d={name:m[0].name,path:m[0].path};["plugins","themes"].includes(i)&&"savefile"!==t&&(d=Object(a.a)(Object(a.a)({},d),{},{active:m[0].active,sourceVersion:m[0].version,destinationVersion:u(p)})),o.push(d)}}return n[i]=o}),n}var T=function(e){var t=L(e,e.current_migration.intent).themes;return C(e,{title:Object(l.a)("Themes","wp-migrate-db"),type:"themes",panel_name:"theme_files",items:t})},I=function(e){var t=L(e,e.current_migration.intent).plugins;return C(e,{title:Object(l.a)("Plugins","wp-migrate-db"),type:"plugins",panel_name:"plugin_files",items:t})},W=function(e){var t=L(e,e.current_migration.intent).muplugins;return 0===t.length?null:C(e,{title:Object(l.a)("Must-Use Plugins","wp-migrate-db"),type:"muplugins",panel_name:"muplugin_files",items:t})},A=function(e){var t=L(e,e.current_migration.intent).others;return 0===t.length?null:C(e,{title:Object(l.a)("Other Files","wp-migrate-db"),type:"others",panel_name:"other_files",items:t})},M=function(e){var t=e.current_migration.intent,n=L(e,t).core;return"savefile"!==t||0===n.length?null:C(e,{title:Object(l.a)("WordPress Core Files","wp-migrate-db"),type:"core",panel_name:"core_files",items:n})};t.default=Object(r.c)(function(e){var t=Object(S.f)("current_migration",e),n=Object(S.f)("local_site",e),a=Object(S.f)("remote_site",e),i=Object(N.a)("panelsOpen",e),c=Object(S.d)("stages",e),l=Object(S.g)("status",e);return{theme_plugin_files:e.theme_plugin_files,current_migration:t,local_site:n,remote_site:a,panelsOpen:i,stages:c,status:l}},{toggleThemePluginFiles:s.g,updateTPFOption:s.m,updateSelected:s.l,updateExcluded:s.j,togglePanelsOpen:F.l,addOpenPanel:F.c,removeOpenPanel:F.h,updateExcludes:s.k,kickOffTPFStage:s.d})(function(e){return c.a.createElement("div",{className:"theme-plugin-files"},c.a.createElement(T,e),c.a.createElement(I,e),c.a.createElement(W,e),c.a.createElement(A,e),c.a.createElement(M,e))})}}]);