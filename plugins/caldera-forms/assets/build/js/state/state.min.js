function CFState(a,b){function c(a){return j.hasOwnProperty(a)}function d(a){var c=b("#"+a);return c.length?(c.on("change keyup",function(){var a=b(this);k[a.attr("id")]=e(a),g.mutateState([a.attr("id")],a.val())}),g.mutateState([c.attr("id")],c.val()),!0):(c=b("."+a),c.length?(c.on("change",function(){var a,c,d=[],h=b(this),i=h.attr("type");switch(i){case"radio":a=h.data("radio-field"),c=b("[data-radio-field="+a+"]"),d="";break;case"checkbox":a=h.data("checkbox-field"),c=b("[data-checkbox-field="+a+"]");break;default:a=h.data("field"),c=b("[data-field="+a+"]")}if(c.length)if(1==c.length)d=e(b(c[0]));else if("checkbox"===i){var j,l=0;c.each(function(a,c){j=b(c),j.prop("checked")&&(l+=f(e(j))),d.push(j.val())}),k[a]=l}else c.each(function(c,f){var g=b(f);g.prop("checked")&&("radio"===i?(k[a]=e(g),d=g.val()):d.push(g.val()))});else d=0;g.mutateState(a,d)}),!0):(g.unbind(a),!1))}function e(a){a.is("select")&&a.has("option")&&(a=a.find(":selected"));var b=0,c=a.attr("data-calc-value");return b=void 0===c||!1===c||isNaN(c)?a.val():a.data("calc-value"),isNaN(b)?0:b}function f(a){return!a||isNaN(a)?0:window.parseFloat(a)}var g=this,h=new CFEvents(this),i={},j={},k={};this.init=function(a){for(var b in a)d(b)?j[b]=a[b]:(j[b]="",i[b]=!0)},this.getState=function(a){return!!c(a)&&j[a]},this.getCalcValue=function(a,d){var h=0;if(!c(a))return h;if(d){d=0;var i,j=d;return b("#"+a).each(function(){j=0,i=b(this),i.prop("checked")&&(j=e(i),f(j)>f(d)&&(d=f(j)))}),f(d)}return k.hasOwnProperty(a)?h=k[a]:(h=g.getState(a),b.isArray(h)&&(h=h.reduce(function(a,b){return f(a)+f(b)},0))),f(h)},this.mutateState=function(a,b){return!!c(a)&&(j[a]!=b&&(j[a]=b,h.trigger(a,b)),!0)},this.unbind=function(a){g.mutateState(a,""),i[a]=!0,delete k[a]},this.rebind=function(a){d(a),delete i[a]},this.events=function(){return{subscribe:function(a,b){c(a)&&h.subscribe(a,b)},detach:function(a,b){h.detach(a,b)}}}}